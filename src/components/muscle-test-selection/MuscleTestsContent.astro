---
import type { MuscleTestDto } from "@/types";
import EmptyState from "@/components/ui/EmptyState.astro";
import ErrorAlert from "@/components/ui/ErrorAlert.astro";
import MuscleTestForm from "@/components/muscle-test-selection/MuscleTestForm.tsx";

export interface Props {
  muscleTests: MuscleTestDto[];
  fetchError: string | null;
  bodyPartId: number;
  backLink: { href: string; label: string };
}

const { muscleTests, fetchError, bodyPartId, backLink } = Astro.props as Props;
---

{
  fetchError ? (
    <ErrorAlert message={fetchError} {...backLink} />
  ) : muscleTests.length > 0 ? (
    <MuscleTestForm client:load bodyPartId={bodyPartId} muscleTests={muscleTests} />
  ) : (
    <EmptyState message="No muscle tests available for this body part." {...backLink} />
  )
}

<div class="mt-6">
  <a href={backLink.href} class="inline-flex items-center text-sm text-blue-600 hover:underline">
    {backLink.label}
  </a>
</div>
